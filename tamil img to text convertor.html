<!DOCTYPE html>
<html lang="ta">
<head>
  <meta charset="UTF-8">
  <title>Tamil Image to Text Converter</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Tamil&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Noto Sans Tamil', sans-serif;
      background: linear-gradient(to right, #f9f3ec, #fffefc);
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 30px;
    }

    h1 {
      color: #333;
      margin-bottom: 20px;
    }

    .container {
      background: white;
      border-radius: 10px;
      padding: 20px 30px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      max-width: 600px;
      width: 100%;
      text-align: center;
    }

    input[type="file"] {
      margin-bottom: 20px;
    }

    #outputText {
      margin-top: 20px;
      background: #f1f1f1;
      border: 1px solid #ccc;
      padding: 15px;
      border-radius: 8px;
      font-size: 18px;
      white-space: pre-wrap;
      direction: ltr;
      text-align: left;
    }

    #loader {
      display: none;
      margin-top: 10px;
      color: #888;
    }

    button {
      background-color: #4caf50;
      color: white;
      padding: 10px 20px;
      margin: 10px 5px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
    }

    button:hover {
      background-color: #45a049;
    }

    @media (max-width: 600px) {
      .container {
        padding: 15px;
      }

      button {
        width: 100%;
      }
    }
  </style>
</head>
<body>

  <h1>üñºÔ∏è Tamil Image to Text Converter</h1>
  <div class="container">
    <input type="file" id="imageUpload" accept="image/*">
    <br>
    <button onclick="convertImage()">Extract Text</button>
    <div id="loader">üîÑ Processing image...</div>
    <div id="outputText"></div>
    <button onclick="downloadAsWord()">Download as Word</button>
  </div>

  <!-- Tesseract.js -->
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@4.1.1/dist/tesseract.min.js"></script>
  <script>
    function convertImage() {
      const fileInput = document.getElementById('imageUpload');
      const output = document.getElementById('outputText');
      const loader = document.getElementById('loader');

      if (!fileInput.files.length) {
        alert("Please select an image first!");
        return;
      }

      loader.style.display = 'block';
      output.textContent = "";

      const file = fileInput.files[0];
      const reader = new FileReader();

      reader.onload = function () {
        Tesseract.recognize(
          reader.result,
          'tam', // Tamil language
          {
            logger: m => console.log(m)
          }
        ).then(({ data: { text } }) => {
          loader.style.display = 'none';
          output.textContent = text;
        }).catch(err => {
          loader.style.display = 'none';
          output.textContent = "‚ùå Error processing image.";
          console.error(err);
        });
      };

      reader.readAsDataURL(file);
    }

    function downloadAsWord() {
      const text = document.getElementById('outputText').textContent;

      if (!text.trim()) {
        alert("No text available to download.");
        return;
      }

      const header = `
        <html xmlns:o='urn:schemas-microsoft-com:office:office' 
              xmlns:w='urn:schemas-microsoft-com:office:word' 
              xmlns='http://www.w3.org/TR/REC-html40'>
        <head><meta charset='utf-8'><title>Tamil Text</title></head>
        <body style="font-family: Noto Sans Tamil, Latha, sans-serif;">
      `;

      const footer = "</body></html>";
      const sourceHTML = header + `<p>${text.replace(/\n/g, "<br>")}</p>` + footer;

      const blob = new Blob(['\ufeff', sourceHTML], {
        type: 'application/msword'
      });

      const url = URL.createObjectURL(blob);
      const link = document.createElement('a');
      link.href = url;
      link.download = 'TamilText.doc';
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    }
  </script>

</body>
</html>


